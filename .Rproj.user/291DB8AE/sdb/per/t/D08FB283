{
    "contents" : "#FONDS DE CARTE\nhydro_19 <- readOGR(dsn=\"./data\", layer=\"hydro_19_cm\", stringsAsFactors = FALSE)\nhydro_20 <- readOGR(dsn=\"./data\", layer=\"hydro_20_cm\", stringsAsFactors = FALSE)\nP18_bati <- readOGR(dsn=\"./data\", layer=\"P18_bati_cm\", stringsAsFactors = FALSE)\nP18_nbati <- readOGR(dsn=\"./data\", layer=\"P18_nbati_cm\", stringsAsFactors = FALSE)\nP19_bati <- readOGR(dsn=\"./data\", layer=\"P19_bati_cm\", stringsAsFactors = FALSE)\nP19_ilots <- readOGR(dsn=\"./data\", layer=\"P19_ilots_cm\", stringsAsFactors = FALSE)\nP20_bati <- readOGR(dsn=\"./data\", layer=\"P20_bati_cm\", stringsAsFactors = FALSE)\nP20_parcelles <- readOGR(dsn=\"./data\", layer=\"P20_parcelles_cm\", stringsAsFactors = FALSE)\n\n#changement de fond en fonction de la date\nbati <- reactive({\n  if (max(input$limites)>1800 & max(input$limites)<2000) \n  {return(P19_bati)} \n  else if (max(input$limites)>2000) \n  {return(P20_bati)} \n  else {return(P18_bati)}\n})\n\nparc <- reactive({\n  if (max(input$limites)>1800 & max(input$limites)<2000) \n  {return(P19_ilots)} \n  else if (max(input$limites)>2000) \n  {return(P20_parcelles)} \n  else {return(P18_nbati)}\n})\n\n\n#affichage des Oh en plot\n  output$carte <- renderPlot({ \n    \n    plot(P20_parcelles,col=\"gray72\", border=NA, xaxs = \"i\", yaxs = \"i\")\n    #plot(P20_bati, col=\"gray64\", border=NA, add = TRUE)\n    plot(hydro_20, col=\"cadetblue3\", border=NA, add = TRUE)\n    \n    plot (OH_pl_sub(), \n          col=adjustcolor(\"salmon\", alpha = 0.7),\n          cex = 4,\n          add=TRUE)\n    \n    plot (OH_pg_sub(),\n          col = adjustcolor(\"deepskyblue4\", alpha = 0.7),\n          border = adjustcolor(\"deepskyblue4\", alpha = 0.7),\n          lwd = 0.5,\n          add=TRUE)\n    \n    plot (OH_pt_sub(), \n          pch=21, \n          bg=adjustcolor(\"turquoise3\", alpha=0.5), \n          col=NA,\n          cex = 1.4,\n          add=TRUE)\n    \n    box(col=\"dimgrey\")\n    \n   })\n#couleurs\nfactorpalette_pg <- colorFactor(fonction_col, OH_pg_4326@data$COULEUR)\nfactorpalette_pt <- colorFactor(fonction_col, OH_pt_4326@data$COULEUR)\nfactorpalette_pl <- colorFactor(fonction_col, OH_pl_4326@data$COULEUR)\n\nif (isTRUE(input$couleur_fonction))\n{ my_col_pg <- ~factorpalette_pg(COULEUR)\nmy_col_pt <- ~factorpalette_pt(COULEUR)\nmy_col_pl <- ~factorpalette_pl(COULEUR)\n}\nelse\n{ my_col_pg <-\"red\"\nmy_col_pt <-\"#ffa500\"\nmy_col_pl <- \"#2caeb0\"\n}\n\n\n# PLOTS\n\n### ggplot facetté fond transparent\nohfreqplot<- ggplot(m_fonction_an, aes(x=annee, y=value, fill=variable))+\n  geom_bar(stat = \"identity\",width=1)+\n  scale_fill_manual(values=adjustcolor(palette, alpha=0.8))+\n  ggtitle(\"Nombre d'OH par année et par valeur urbaine\")+\n  xlab(\"année\")+\n  ylab(\"Nombre d'OH\")+\n  scale_x_continuous(limits=c(date_min,date_max))+\n  theme_hc()+\n  theme(legend.position=\"none\",\n        panel.grid.major.x = element_line(color = \"#F5F5F3\", linetype =\"dotted\", size = 0.5),\n        panel.grid.major.y = element_line(color= \"#F5F5F3\", size= 0.5),\n        axis.ticks =  element_line(color = \"#F5F5F3\"),\n        axis.text = element_text(colour = \"#F5F5F3\"),\n        text = element_text(colour = \"#F5F5F3\"),\n        plot.title = element_text(size = rel(1.2), face = \"bold\", margin=margin(10)),\n        axis.text.x = element_text(angle=90),\n        panel.background = element_rect(fill = \"transparent\",colour = NA),\n        plot.background = element_rect(fill = \"transparent\",colour = NA))+\n  facet_wrap(~ v_urb, nrow=2)\n\n\n#       ohfreqplot<- ggplot(m_fonction_an, aes(x=annee, y=value, fill=variable))+\n#         geom_bar(stat = \"identity\")+\n#         scale_fill_manual(values=adjustcolor(palette, alpha=0.5))+\n#         ggtitle(\"Nombre et type d'OH dans le temps\")+\n#         scale_x_continuous(limits=c(date_min,date_max))+\n#         theme_timelineEDB()",
    "created" : 1461791683626.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2308774809",
    "id" : "D08FB283",
    "lastKnownWriteTime" : 1476801326,
    "path" : "C:/Users/lue/Sync/1recherche/1these/SIG/VISU/visu_temps/shiny_3_2geom/annexes_abandonnees.R",
    "project_path" : "annexes_abandonnees.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}