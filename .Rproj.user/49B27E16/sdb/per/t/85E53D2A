{
    "collab_server" : "",
    "contents" : "################################\n# Shiny app pour afficher les objets selon le temps\n# mai 2018\n# UI pour explOH_11\n################################\nlibrary(shiny)\nlibrary(leaflet)\n\n\n#define UI\nshinyUI(\n  \n  dashboardPage(\n    skin=\"black\",\n    \n    #titre\n    dashboardHeader(\n      title=NULL,\n      titleWidth = 0),\n    \n    dashboardSidebar(\n      width=150,\n      sidebarMenu(\n        menuItem(\"Exploration\", tabName=\"explo_carte\", icon = icon(\"search\")),\n        menuItem(\"AFC\", tabName=\"afc\", icon=icon(\"chart-bar\")),\n        menuItem(\"Informations\", tabName =\"info\", icon=icon(\"info\"))\n      )\n    ),\n    \n    dashboardBody(\n      \n      tags$head(tags$link(rel=\"icon\", type=\"image/png\", href=\"favicon.png\"),\n                tags$link(rel=\"stylesheet\", type=\"text/css\", href=\"https://fonts.googleapis.com/css?family=Roboto\"),\n                tags$link(rel=\"stylesheet\", type=\"text/css\", href=\"https://fonts.googleapis.com/css?family=Josefin+Sans:400,600,700\"),\n                tags$script(src =\"https://rawgit.com/rowanwins/leaflet-easyPrint/gh-pages/dist/bundle.js\"),\n                tags$title(\"explOH\"),\n                includeCSS(\"www/style.css\")\n                #attention pas d'accent dans le css > erreur utf\n      ),\n      \n      useShinyjs(),\n      \n      tabItems(\n        tabItem(tabName=\"explo_carte\",\n                #------------------------------- 1. exploration ------------------\n                fluidRow(\n                  #curseur années\n                  box (\n                    id=\"temps_play\",\n                    width=9,\n                    height = 128,\n                    # slide temps\n                    sliderInput(\"limites\", label=\"\",\n                                min=-25, max=2015, value=c(-25, -25), round = 1, step=10, sep=\" \",\n                                animate = animationOptions(interval=1500))\n                  ),#fin curseur années\n                  \n                  \n                  #bornes temporelles\n                  box (\n                    id=\"menu_temps\",\n                    width=3,\n                    splitLayout(\n                      textInput(\"borne_temps_1\", label =\"année min\", value = NULL),\n                      textInput(\"borne_temps_2\", label=\"année max\", value = NULL)\n                    ),\n                    actionButton(\"selec_bornes_temps\", label=\"Appliquer les bornes\")\n                  )#fin menu bornes temps\n                ),#fin fluidRow temps\n                \n                \n                #carte et affichage\n                fluidRow(\n                  \n                  #carte\n                  column(\n                    id=\"map_col\",\n                    width=9,\n                    leafletOutput(\"map\", height = \"600px\")\n                  ),#fin carte\n                  \n                  \n                  #affichage\n                  box(\n                    id=\"affichage_OH\",\n                    width=3,\n                    title=\"affichage des OH\",\n                    #selection valeurs d'usage\n                    tags$span(\"Affichage des différents types d'activités :\"),\n                    br(),br(),\n                    # fonctions à afficher\n                    lapply(1:6, function(i) {\n                      pickerInput(\n                        inputId = paste(\"picker_vurb\", i, sep=\"_\"),\n                        # label = liste_vurb[i],\n                        choices = liste_vusage[substring(liste_vusage,1,2) < i*10+10 & substring(liste_vusage,1,2) >= i*10],\n                        selected = liste_vusage[substring(liste_vusage,1,2) < i*10+10 & substring(liste_vusage,1,2) >= i*10],\n                        multiple = TRUE,\n                        options = list(\n                          `selected-text-format` = \"count>-1\",\n                          `count-selected-text` = paste(liste_vurb[i],\"[{0}/{1}]\", sep=\" \"),\n                          `actions-box` = TRUE,\n                          `deselect-all-text` = \"Aucune\",\n                          `select-all-text` = \"Toutes\",\n                          # `none-Selected-Text` =paste(liste_vurb[i],\"(0/{1} activités)\", sep=\" \"),\n                          `live-Search` = TRUE,\n                          style = paste(\"btn-\",i, sep=\"\")\n                        )\n                      )\n                    } ),#fin sélection valeurs d'usage\n                    br(),\n                    # couleurs selon fonction, portée ou durée d'existance\n                    tags$span(\"différenciation des OH selon leur :\"),\n                    radioButtons(\"couleur_OH\", label =NULL,\n                                 choices = list(\"activité\" = \"v_urb\", \n                                                \"portée\" = \"portee\"), \n                                 selected = \"v_urb\",\n                                 inline = TRUE)\n                  ), #fin affichage\n                  \n                  \n                  #identification\n                  box(\n                    id=\"id_OH\",\n                    width=3,\n                    title=\"identification des OH\",\n                    #trouver OF\n                    searchInput(\"selec_OH\", \n                                label=NULL,\n                                placeholder= \"Entrer un n° d'OH à trouver\", \n                                btnSearch = icon(\"search\"),\n                                btnReset = icon(\"remove\"))\n                  )#fin identification\n                  \n                  \n                  \n                  \n                ), #fin fluidrow carte, affichage, identification\n                \n                \n                fluidRow(\n                  #téléchargement\n                  box( \n                    id=\"menu_dl\",\n                    width=2,\n                    title =\"téléchargement des OH\",\n                    downloadButton(\"downloadData\", label=\"Télécharger les OH\"),\n                    selectInput(\"type_dl\", \"Type de fichier:\", choices = c(\"geojson\", \"sqlite\",\"csv\"))\n                  ),#fin téléchargement\n                  \n                  #tableau OH\n                  box(\n                    id=\"tableau_OH\",\n                    width=10,\n                    title=\"tableau des OH sélectionnés\",\n                    collapsible = TRUE,\n                    collapsed = TRUE,\n                    dataTableOutput(\"tab_OH\")\n                  )\n                )\n                \n        ),#fin exploration\n        \n        \n        # tags$div(source.signature)\n        \n        \n        #------------------------------ AFC ------------------------\n        tabItem(tabName=\"afc\",\n                fluidRow(\n                  box(\n                    id=\"info_AFC\",\n                    width=12,\n                    solidHeader = TRUE,\n                    tags$span(\"Cet onglet permet d'explorer la structure fonctionnelle et temporelle de l'espace urbain tourangeau à travers des AFC. Celles-ci sont calculées sur des tableaux de contingence dénombrant le nombre d'OH selon des périodes temporelles et des caractéristiques fonctionnelles variées. \"),\n                    br(),br(),\n                    tags$span(\"1. onglets bleus : Choisir le tableau de contingence et lancer le calcul de l'AFC \"),br(),\n                    tags$span(\"2. onglets oranges : Affichage de l'inertie expliquée par chaque axe et choix des axes à analyser\"),br(),\n                    tags$span(\"3. onglets rouges : Visualisation du biplot des axes selectionnés et tableaux des contributions des variables en ligne et en colonne \")\n                    \n                  )\n                ),#fin info AFC ligne 1\n                \n                fluidRow( #ligne 2\n                  \n                  box(\n                    id=\"choix_periodes\",\n                    width=4,\n                    title= \"choix du tableau de contingence\",\n                    collapsible = TRUE,\n                    status=\"primary\",\n                    column(\n                      width=6,\n                      radioGroupButtons(\n                        label=\"Découpage temporel\",\n                        inputId=\"select_periodes\",\n                        choices=c(\"tous les 25 ans\"=\"25\", \n                                  \"tous les 50 ans\"=\"50\", \n                                  \"tous les 100 ans\"=\"100\", \n                                  \"par périodes historiques\"=\"exp\"),\n                        direction=\"vertical\",\n                        status=\"primary\",\n                        size=\"sm\"\n                      )),#fin colonne temp\n                    column(\n                      width=6,\n                      radioGroupButtons(\n                        label=\"Caractéristiques fonctionnelles\",\n                        inputId=\"select_var\",\n                        choices=c(\"valeurs urbaines\"=\"urb\", \n                                  \"valeurs d'usage\"=\"usage\", \n                                  \"portées\"=\"portee\"),\n                        direction=\"vertical\",\n                        status=\"primary\",\n                        size=\"sm\"\n                      )) #fin colonne var\n                  ), #fin choix tableau de contingence\n                  \n                  column( \n                    width = 8, # colonne pour bouton action AFC et affichage tableau\n                    box(\n                      width =12,\n                      status=\"primary\",\n                      actionButton(\"action_AFC\", \n                                   label = \"Calculer l'AFC\") #calcul de l'AFC\n                    ),\n                    box(\n                      id=\"affichage_tab_contingence\",\n                      width=12,\n                      status=\"primary\",\n                      title=\"tableau de contingence pour l'AFC\",\n                      dataTableOutput(\"tab_contingence\"),\n                      collapsible = TRUE\n                    )# fin tableau de contingence\n                    \n                  ) #fin colonne bouton action AFC et affichage tableau\n                ), # fin ligne 2\n                \n        \n        \n        fluidRow( #ligne 3 : choix des axes\n          box(\n            id=\"inertie_axes\",\n            class=\"plot_AFC\",\n            width=8,\n            status=\"warning\",\n            title=\"inertie des axes de l'AFC\",\n            plotOutput(\"plot_inertie_axes\",\n                       height = \"200px\"),\n            collapsible = TRUE\n          ),\n          box(\n            id=\"choix_axes_biplot\",\n            width=4,\n            collapsible = TRUE,\n            status=\"warning\",\n            title=\"choix des axes à analyser\",\n            pickerInput(\n              inputId = \"axe1\",\n              label=\"Choix du premier axe\",\n              choices=NULL\n            ),\n            pickerInput(\n              inputId = \"axe2\",\n              label=\"Choix du deuxième axe\",\n              choices=NULL\n            )\n            \n          )\n\n          \n        ), #fin ligne 3 : choix des axes\n        \n        fluidRow(#ligne 4 : biplot\n          box(\n            id=\"biplot\",\n            width=12,\n            class=\"plot_AFC\",\n            collapsible=TRUE,\n            status=\"danger\",\n            title=\"biplot des axes sélectionnés\",\n            \n            column(\n            width=8,\n              plotOutput(\"plot_biplot\",\n                       height = \"600px\"))\n          )\n          \n        ),#fin ligne 4 : biplot\n        \n        fluidRow( #ligne 5 contrib axes\n          \n          box(\n            id=\"contributions\",\n            width=12,\n            collapsible=TRUE,\n            status=\"danger\",\n            title=\"contribution des variables aux axes de l'AFC\",\n            column(\n              width=6,\n              class=\"tab_contrib_AFC\",\n              tags$span(\"Contribution des périodes temporelles\"),\n              br(),br(),\n              dataTableOutput(\"contrib_periodes\")\n            ),\n            column(\n              width=6,\n              class=\"tab_contrib_AFC\",\n              tags$span(\"Contribution des variables fonctionnelles\"),\n              br(),br(),\n              dataTableOutput(\"contrib_variables\")\n            )            \n            \n          )\n        )\n      \n\n        ), #fin tabAFC\n        \n        #------------------------------- INFO ------------------\n        \n        tabItem(tabName=\"info\",\n                fluidRow( \n                  column(6, source.info),\n                  column (6, source.usage)\n                )\n        )\n      ) #fin tabItems\n      \n    )\n    \n  )\n  \n)\n\n\n",
    "created" : 1530766849108.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3855258529",
    "id" : "85E53D2A",
    "lastKnownWriteTime" : 1530803738,
    "last_content_update" : 1530803738462,
    "path" : "D:/Sync/1recherche/1these/SIG/VISU/shiny/explOH_11b/ui.r",
    "project_path" : "ui.r",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}